{"version":3,"file":"shared-lib.js.map","sources":["ng://shared-lib/lib/uuid/uuid.service.ts","ng://shared-lib/lib/ui/ui-confirm/dialog.model.ts","ng://shared-lib/lib/ui/ui-confirm/ui-confirm.component.ts","ng://shared-lib/lib/ui/ui-list/ui-list.component.ts","ng://shared-lib/lib/ui/ui-editor/ui-editor.component.ts","ng://shared-lib/lib/shared-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { v4 as uuid } from 'uuid';\nimport { v5 as url2id } from 'uuid';\nimport { Url } from 'url';\n\n/*\n * Adapted from https://stackoverflow.com/a/55365334/1667410\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class UuidService {\n  public idCache: string[] = [];\n\n  constructor() {}\n\n  public generate(url?: Url): string {\n    let isUnique = false;\n    let tempId = '';\n\n    if (url) {\n      tempId = url2id(url, url2id.URL);\n    } else {\n      tempId = uuid();\n    }\n\n    while (!isUnique) {\n      if (!this.idExists(tempId)) {\n        isUnique = true;\n      }\n    }\n    // console.log(this.idCache);\n    return tempId;\n  }\n\n  public cache(id: string): void {\n    this.idCache.push(id);\n  }\n\n  public release(id: string): void {\n    const index = this.idCache.indexOf(id);\n    this.idCache.splice(index, 1);\n  }\n\n  private idExists(id: string): boolean {\n    return this.idCache.includes(id);\n  }\n\n}\n","export class Dialog {\n  constructor(\n      public title: string,\n      public message: string\n      ) {}\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\n\nimport { Dialog } from './dialog.model';\n\n@Component({\n  selector: 'ui-confirm',\n  templateUrl: './ui-confirm.component.html',\n  styleUrls: ['./ui-confirm.component.css']\n})\nexport class UiConfirmComponent implements OnInit {\n  title: string;\n  message: string;\n\n  constructor(\n    public dialogRef: MatDialogRef<UiConfirmComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: Dialog\n    ) {    // Update view with given values\n      this.title = data.title;\n      this.message = data.message;\n  }\n\n  ngOnInit() {\n  }\n\n  onConfirm(): void {\n    // Close the dialog, return true\n    this.dialogRef.close(true);\n  }\n\n  onDismiss(): void {\n    // Close the dialog, return false\n    this.dialogRef.close(false);\n  }\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Observable } from 'rxjs';\n// import { UiConfirmComponent } from '../ui-confirm/ui-confirm.component';\n\n@Component({\n  selector: 'ui-list',\n  templateUrl: './ui-list.component.html',\n  styleUrls: ['./ui-list.component.scss'],\n  // providers: [ConfirmationService]\n})\nexport class UiListComponent implements OnInit {\n  @Input() dataset: Observable<any[]>;\n  @Output() datasetChange: EventEmitter<Observable<any[]>>;\n  @Input() current: Observable<any>;\n  @Output() currentChange: EventEmitter<any>;\n  @Output() edit: EventEmitter<any>;\n  @Output() delete: EventEmitter<any>;\n\n  public headers: string[];\n  public hideCols = ['uuid'];\n  public display = [];\n\n  constructor(\n    // private confirmationService: ConfirmationService\n  ) {\n    this.datasetChange = new EventEmitter<Observable<any[]>>();\n    this.currentChange = new EventEmitter<any>();\n    this.edit = new EventEmitter<any>();\n    this.delete = new EventEmitter<any>();\n  }\n\n  public ngOnInit(): void {\n    this.setColumns();\n  }\n\n  /*\n   * https://stackoverflow.com/questions/54091011/disable-the-default-keyvalue-pipe-sort-in-angular\n   */\n  public sortDisabled(): number {\n    return 0;\n  }\n\n  public setColumns(): void {\n    let now: any;\n    this.current.subscribe(curr => now = curr);\n    this.headers = Object.keys(now);\n    this.headers.forEach(header => {\n      let displayType = 'table-cell';\n      const hidden = this.hideCols.find(col => col === header);\n      if (hidden) { displayType = 'none'; }\n      this.display.push(displayType);\n    });\n  }\n\n  public  setCurrent(record: any): void {\n    this.currentChange.emit(record);\n  }\n\n  public editRecord(record: any): void {\n    this.edit.emit(record);\n  }\n\n  public  deleteRecord(record: any): void {\n    // this.confirmationService.confirm({\n    //   message: 'Are you sure that you want to delete this record',\n    //   header: 'Delete record',\n    //   icon: 'pi pi-exclamation-triangle',\n    //   accept: () => {\n        this.delete.emit(record);\n    //   }\n    // });\n  }\n}\n","import { Component, OnInit, OnChanges, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormlyFormOptions, FormlyFieldConfig, FormsLibService } from 'forms-lib';\n\n@Component({\n  selector: 'ui-editor',\n  templateUrl: './ui-editor.component.html'\n})\nexport class UiEditorComponent implements OnInit, OnChanges {\n  @Input() record: any;\n  @Input() create: boolean;\n  @Output() delete: EventEmitter<any>;\n  @Output() cancel: EventEmitter<any>;\n  @Output() update: EventEmitter<any>;\n\n  public form: FormGroup;\n  public model: any;\n  public fields: FormlyFieldConfig[];\n  public options: FormlyFormOptions;\n  public submitLabel: string;\n\n  constructor(\n    private formsService: FormsLibService,\n    ) {\n      this.delete = new EventEmitter<any>();\n      this.cancel = new EventEmitter<any>();\n      this.update = new EventEmitter<any>();\n    }\n\n  ngOnInit() {\n    if (!this.record) { console.log('No record supplied!'); }\n    this.createForm();\n  }\n\n  ngOnChanges() {\n    this.model = Object.assign({}, this.record);\n    if (this.create) {\n      this.submitLabel = 'Create';\n      } else {\n      this.submitLabel = 'Update';\n      }\n  }\n\n  private createForm() {\n    this.form = new FormGroup({});\n    this.fields = this.formsService.getModelFields(this.model);\n    this.options = {};\n  }\n\n  public deleteRecord(model: any): void {\n    this.delete.emit(model);\n  }\n\n  public cancelEdit(model: any): void {\n    this.cancel.emit(model);\n  }\n\n  public updateRecord(model: any): void {\n    this.update.emit(model);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UiEditorComponent } from './ui/ui-editor/ui-editor.component';\nimport { UiListComponent } from './ui/ui-list/ui-list.component';\nimport { FormsLibModule } from 'forms-lib';\n\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { UiConfirmComponent } from './ui/ui-confirm/ui-confirm.component';\n\n@NgModule({\n  declarations: [\n    UiEditorComponent,\n    UiListComponent,\n    UiConfirmComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsLibModule,\n    MatToolbarModule,\n    MatButtonModule\n  ],\n  exports: [\n    UiEditorComponent,\n    UiListComponent,\n    UiConfirmComponent\n  ]\n})\nexport class SharedLibModule { }\n"],"names":["url2id","uuid"],"mappings":"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"}
