{"version":3,"file":"shared-lib.umd.js.map","sources":["ng://shared-lib/lib/uuid/uuid.service.ts","ng://shared-lib/lib/ui/ui-confirm/dialog.model.ts","ng://shared-lib/lib/ui/ui-confirm/ui-confirm.component.ts","ng://shared-lib/lib/ui/ui-list/ui-list.component.ts","ng://shared-lib/lib/ui/ui-editor/ui-editor.component.ts","ng://shared-lib/lib/shared-lib.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { v4 as uuid } from 'uuid';\nimport { v5 as url2id } from 'uuid';\nimport { Url } from 'url';\n\n/*\n * Adapted from https://stackoverflow.com/a/55365334/1667410\n */\n@Injectable({\n  providedIn: 'root',\n})\nexport class UuidService {\n  public idCache: string[] = [];\n\n  constructor() {}\n\n  public generate(url?: Url): string {\n    let isUnique = false;\n    let tempId = '';\n\n    if (url) {\n      tempId = url2id(url, url2id.URL);\n    } else {\n      tempId = uuid();\n    }\n\n    while (!isUnique) {\n      if (!this.idExists(tempId)) {\n        isUnique = true;\n      }\n    }\n    // console.log(this.idCache);\n    return tempId;\n  }\n\n  public cache(id: string): void {\n    this.idCache.push(id);\n  }\n\n  public release(id: string): void {\n    const index = this.idCache.indexOf(id);\n    this.idCache.splice(index, 1);\n  }\n\n  private idExists(id: string): boolean {\n    return this.idCache.includes(id);\n  }\n\n}\n","export class Dialog {\n  constructor(\n      public title: string,\n      public message: string\n      ) {}\n}\n","import { Component, OnInit, Inject } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material';\n\nimport { Dialog } from './dialog.model';\n\n@Component({\n  selector: 'ui-confirm',\n  templateUrl: './ui-confirm.component.html',\n  styleUrls: ['./ui-confirm.component.css']\n})\nexport class UiConfirmComponent implements OnInit {\n  title: string;\n  message: string;\n\n  constructor(\n    public dialogRef: MatDialogRef<UiConfirmComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: Dialog\n    ) {    // Update view with given values\n      this.title = data.title;\n      this.message = data.message;\n  }\n\n  ngOnInit() {\n  }\n\n  onConfirm(): void {\n    // Close the dialog, return true\n    this.dialogRef.close(true);\n  }\n\n  onDismiss(): void {\n    // Close the dialog, return false\n    this.dialogRef.close(false);\n  }\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Observable } from 'rxjs';\n// import { UiConfirmComponent } from '../ui-confirm/ui-confirm.component';\n\n@Component({\n  selector: 'ui-list',\n  templateUrl: './ui-list.component.html',\n  styleUrls: ['./ui-list.component.scss'],\n  // providers: [ConfirmationService]\n})\nexport class UiListComponent implements OnInit {\n  @Input() dataset: Observable<any[]>;\n  @Output() datasetChange: EventEmitter<Observable<any[]>>;\n  @Input() current: Observable<any>;\n  @Output() currentChange: EventEmitter<any>;\n  @Output() edit: EventEmitter<any>;\n  @Output() delete: EventEmitter<any>;\n\n  public headers: string[];\n  public hideCols = ['uuid'];\n  public display = [];\n\n  constructor(\n    // private confirmationService: ConfirmationService\n  ) {\n    this.datasetChange = new EventEmitter<Observable<any[]>>();\n    this.currentChange = new EventEmitter<any>();\n    this.edit = new EventEmitter<any>();\n    this.delete = new EventEmitter<any>();\n  }\n\n  public ngOnInit(): void {\n    this.setColumns();\n  }\n\n  /*\n   * https://stackoverflow.com/questions/54091011/disable-the-default-keyvalue-pipe-sort-in-angular\n   */\n  public sortDisabled(): number {\n    return 0;\n  }\n\n  public setColumns(): void {\n    let now: any;\n    this.current.subscribe(curr => now = curr);\n    this.headers = Object.keys(now);\n    this.headers.forEach(header => {\n      let displayType = 'table-cell';\n      const hidden = this.hideCols.find(col => col === header);\n      if (hidden) { displayType = 'none'; }\n      this.display.push(displayType);\n    });\n  }\n\n  public  setCurrent(record: any): void {\n    this.currentChange.emit(record);\n  }\n\n  public editRecord(record: any): void {\n    this.edit.emit(record);\n  }\n\n  public  deleteRecord(record: any): void {\n    // this.confirmationService.confirm({\n    //   message: 'Are you sure that you want to delete this record',\n    //   header: 'Delete record',\n    //   icon: 'pi pi-exclamation-triangle',\n    //   accept: () => {\n        this.delete.emit(record);\n    //   }\n    // });\n  }\n}\n","import { Component, OnInit, OnChanges, Input, Output, EventEmitter } from '@angular/core';\nimport { FormGroup, FormlyFormOptions, FormlyFieldConfig, FormsLibService } from 'forms-lib';\n\n@Component({\n  selector: 'ui-editor',\n  templateUrl: './ui-editor.component.html'\n})\nexport class UiEditorComponent implements OnInit, OnChanges {\n  @Input() record: any;\n  @Input() create: boolean;\n  @Output() delete: EventEmitter<any>;\n  @Output() cancel: EventEmitter<any>;\n  @Output() update: EventEmitter<any>;\n\n  public form: FormGroup;\n  public model: any;\n  public fields: FormlyFieldConfig[];\n  public options: FormlyFormOptions;\n  public submitLabel: string;\n\n  constructor(\n    private formsService: FormsLibService,\n    ) {\n      this.delete = new EventEmitter<any>();\n      this.cancel = new EventEmitter<any>();\n      this.update = new EventEmitter<any>();\n    }\n\n  ngOnInit() {\n    if (!this.record) { console.log('No record supplied!'); }\n    this.createForm();\n  }\n\n  ngOnChanges() {\n    this.model = Object.assign({}, this.record);\n    if (this.create) {\n      this.submitLabel = 'Create';\n      } else {\n      this.submitLabel = 'Update';\n      }\n  }\n\n  private createForm() {\n    this.form = new FormGroup({});\n    this.fields = this.formsService.getModelFields(this.model);\n    this.options = {};\n  }\n\n  public deleteRecord(model: any): void {\n    this.delete.emit(model);\n  }\n\n  public cancelEdit(model: any): void {\n    this.cancel.emit(model);\n  }\n\n  public updateRecord(model: any): void {\n    this.update.emit(model);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { UiEditorComponent } from './ui/ui-editor/ui-editor.component';\nimport { UiListComponent } from './ui/ui-list/ui-list.component';\nimport { FormsLibModule } from 'forms-lib';\n\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatButtonModule } from '@angular/material/button';\nimport { UiConfirmComponent } from './ui/ui-confirm/ui-confirm.component';\n\n@NgModule({\n  declarations: [\n    UiEditorComponent,\n    UiListComponent,\n    UiConfirmComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsLibModule,\n    MatToolbarModule,\n    MatButtonModule\n  ],\n  exports: [\n    UiEditorComponent,\n    UiListComponent,\n    UiConfirmComponent\n  ]\n})\nexport class SharedLibModule { }\n"],"names":["url2id","uuid","Injectable","Component","MatDialogRef","Inject","MAT_DIALOG_DATA","EventEmitter","Input","Output","FormGroup","FormsLibService","NgModule","CommonModule","FormsLibModule","MatToolbarModule","MatButtonModule"],"mappings":"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"}
